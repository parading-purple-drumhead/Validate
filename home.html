<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Validate | Homepage</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="css/home.css" />
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-brown">
      <div class="container">
        <a class="navbar-brand" href="#" style="font-size: 2rem">Validate</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item me-3">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item me-3">
              <a class="nav-link" href="#">Profile</a>
            </li>
            <li class="nav-item me-5">
              <a class="nav-link" href="#" id="logoutButton">Logout</a>
            </li>
          </ul>
          <form class="d-flex mt-3">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-primary" type="submit">Go</button>
          </form>
        </div>
      </div>
    </nav>

    <div class="container" style="margin-top: 9rem">
      <div class="row">
        <div class="col-lg-8 offset-lg-2">
          <!-- Add Post Module -->
          <div class="card bg-light shadow-sm mb-5">
            <div class="card-body">
              <h4 class="mb-3">Create a New Post</h4>
              <form id="newPostForm">
                <input
                  type="text"
                  class="form-control mb-2"
                  placeholder="Title"
                  id="newPostTitle"
                />
                <textarea
                  class="form-control"
                  placeholder="Write a description"
                  id="newPostDescription"
                  style="height: 5rem"
                ></textarea>
                <div class="row">
                  <div class="col-lg-3 pt-4">
                    <span class="text-danger" id="createPostError"></span>
                    <span class="text-success" id="createPostSuccess"></span>
                  </div>
                  <div class="col-lg-3 offset-lg-6">
                    <button
                      class="btn btn-success mt-3"
                      style="float: right; width: 50%"
                      type="submit"
                    >
                      Create
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>

          <hr />

          <!-- Post list -->
          <div class="my-5" id="postContainer"></div>
        </div>
      </div>
    </div>

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyAYxeMw3OaNLuFBbbUUlvlyW1riL1BjhTE",
        authDomain: "fir-c329a.firebaseapp.com",
        databaseURL: "https://fir-c329a.firebaseio.com",
        projectId: "fir-c329a",
        storageBucket: "fir-c329a.appspot.com",
        messagingSenderId: "734117625205",
        appId: "1:734117625205:web:b5d7894ce0bf047eac673c",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
    </script>
    <script src="js/home.js" type="module"></script>
    <script>
      const url = "https://6173-122-174-231-95.ngrok.io/";

      async function upvotePost(post_id) {
        await fetch(url + "upvote/" + post_id, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
            window.location.reload();
          })
          .catch((error) => console.error(error));
      }

      async function downvotePost(post_id) {
        await fetch(url + "downvote/" + post_id, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
            window.location.reload();
          })
          .catch((error) => console.error(error));
      }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
